# FFUI v0.2.1

Full Changelog: https://github.com/muyuanjin/ffui/compare/v0.2.0...v0.2.1

## English

### Highlights

- Preview resilience: adds a frame-scrub fallback preview when native video playback fails, plus cache cleanup to keep disk usage under control.
- Job Compare: compare two jobs side-by-side with seek-aligned frames and a clearer UI.
- Queue 3D Carousel: new responsive 3D carousel view with multiple layout and layering fixes for smoother navigation.
- Network proxy: configurable proxy modes (none/system/custom) with on-demand System proxy resolution; Windows no longer shows registry-query console popups.
- Desktop & i18n polish: persists window size/position and UI locale; global alerts render as an overlay to avoid layout shifts.

### Details

- Queue & navigation
  - Adds a responsive 3D carousel layout algorithm and follow-up fixes (overlap, z-index layering, full-height usage, larger cards, infinite loop).
  - Hardens preview selection and empty-queue badge; refreshes thumbnails after preview regeneration.
  - Improves context menus (including skipped jobs) with copy-path actions and open-folder shortcuts.
- Preview & compare
  - Adds a Job Compare dialog backed by cached frame extraction, with seek-aligned comparison and improved error messaging.
  - Reduces scrub jank via fast seek + scheduling; refines expanded preview source switching.
  - Introduces a scrubbable fallback preview when native `<video>` playback is unavailable, with a system-player fallback.
- Networking & updates
  - Adds proxy settings (none/system/custom) applied to network operations, with on-demand System proxy resolution.
  - Improves Windows proxy detection (no console popups) and adds updater preflight checks.
- Settings & performance
  - Adds split concurrency limits (CPU/HW caps) and clarifies concurrency UI.
  - Speeds up presets/queue snapshots via `Arc` snapshots, and persists tool probe cache to avoid re-probing on every startup.
- Reliability, cleanup, and safety
  - Fixes resume seek accuracy and prevents progress reset between serial jobs.
  - Renames Smart Scan to Batch Compress; fixes deletion for all-skipped and legacy/missing-metadata batches.
  - Tightens file/path safety by restricting allowed media/image extensions for asset protocol and open-path actions.

### Detailed commit messages (since v0.2.0)

- bb8c799 feat: add fallback media scrub preview and cache cleanup
- fab325b feat: add split concurrency limits and copy-path actions
- b3f892e feat: add job compare dialog and network proxy settings
- 10c1631 fix(windows): prevent proxy reg query console popup
- af61900 perf(proxy): resolve System proxy on-demand
- 4061b99 refactor(proxy): reorganize module imports and improve code readability
- cf6ce15 feat: polish job compare and settings UX
- 0ef8810 perf: reuse presets snapshots via Arc
- f7c7ece feat: persist locale and tool probe cache
- af105b3 feat: add job compare UI, preview fallbacks, and locale bootstrap
- 4d8e7f8 fix: refine expanded preview source switching
- 5dbfb12 fix: align compare frames after seek
- 0b8ac17 fix: open full parameter panel from preset wizard
- 9535981 feat: adjust the order of right click menu buttons
- c783254 style: code formatting
- d50fd14 fix: make repo checks green (zero warnings)
- e67f797 feat(queue): add 3D carousel view mode for queue display
- 7f32ceb fix: correct resume seek using probed segment durations
- eb43af0 fix: prevent batch detail context menu clipping
- d4401a1 fix: prevent progress reset between serial jobs
- 19f32ff fix(queue): improve 3D carousel with larger cards and infinite loop
- 0a813a2 fix(preview): reduce scrub jank with fast seek and scheduler
- f95086d fix(queue): correct 3D carousel layout with proper z-index layering
- 65b6623 fix: allow deleting all-skipped Smart Scan batches
- 1ef0778 fix: render global alerts as overlay
- d8482da fix: prevent 3D carousel overlap and use full queue space
- 5857afd feat(context-menu): add context menu for skipped jobs with copy and open folder options
- 729f2b3 refactor: rename Smart Scan to Batch Compress
- 3146ac1 fix(ui): align global alert dismiss button and localize title
- 0b714bc fix: delete legacy Batch Compress batches
- 5871f34 feat(tauri): persist window size and position
- 36ca1b2 fix: refresh taskbar progress labels on locale switch
- 2c5b4c3 docs: add compare wipe screenshot to docs
- 1ee11a3 fix: refresh queue thumbnails after preview regeneration
- 4f90ff5 docs: improve screenshots (hide batch compress, add compare wipe gif)
- 71cffa0 fix: harden preview selection and empty-queue badge
- ecbf873 refactor(queue): responsive 3D carousel and preview improvements

## 中文

### 重点更新

- 预览更稳：当原生视频播放不可用时，新增“可拖动帧预览”的兜底方案，并补齐缓存清理以控制磁盘占用。
- 任务对比（Job Compare）：支持两任务并排对比，seek 后对齐帧显示，交互与错误提示更清晰。
- 队列 3D 轮播：新增响应式 3D 轮播视图，多轮修复布局/遮挡问题，浏览更顺滑。
- 网络代理：新增代理模式（无/系统/自定义），并优化系统代理解析；修复 Windows 下查询代理弹出控制台的问题。
- 桌面与多语言：窗口大小/位置与界面语言可持久化；全局告警改为浮层展示，避免挤压现有布局。

### 细节说明

- 队列与导航
  - 新增“响应式 3D 轮播”布局算法，并持续修复（遮挡/重叠、z-index 分层、垂直空间占用、卡片尺寸、无限循环等）。
  - 强化空队列徽标与预览选择逻辑；预览重建后会刷新队列缩略图。
  - 右键菜单能力增强：支持复制输入/输出路径、打开文件夹；跳过任务也支持更完整的菜单操作。
- 预览与对比
  - 新增任务对比弹窗（基于缓存帧抽取），seek 后对齐显示，并优化错误提示与交互细节。
  - 通过快速 seek + 调度降低拖动预览卡顿；优化展开预览的源切换体验。
  - 新增“帧预览兜底”：当 `<video>` 播放失败时仍可拖动预览关键帧，并支持用系统播放器打开。
- 网络与更新
  - 新增代理设置（无/系统/自定义），并应用到网络请求；系统代理改为按需解析。
  - Windows 端代理探测更安静（不再弹控制台），并增加更新前的预检流程。
- 设置与性能
  - 新增拆分并发限制（CPU/HW 上限）与更清晰的并发设置 UI。
  - 预设与队列快照性能优化（`Arc` 快照减少拷贝），并持久化工具探测缓存以减少启动时重复探测。
- 稳定性、清理与安全
  - 修复续传 seek 精度问题，并避免串行任务之间进度被重置。
  - 将 Smart Scan 更名为 Batch Compress，并修复“全跳过/遗留数据缺失”批次的删除问题。
  - 收紧文件/路径安全：限制 asset protocol 与“打开路径”只允许显式媒体/图片扩展名。

### 详细提交消息（自 v0.2.0 起）

- bb8c799 feat: add fallback media scrub preview and cache cleanup
- fab325b feat: add split concurrency limits and copy-path actions
- b3f892e feat: add job compare dialog and network proxy settings
- 10c1631 fix(windows): prevent proxy reg query console popup
- af61900 perf(proxy): resolve System proxy on-demand
- 4061b99 refactor(proxy): reorganize module imports and improve code readability
- cf6ce15 feat: polish job compare and settings UX
- 0ef8810 perf: reuse presets snapshots via Arc
- f7c7ece feat: persist locale and tool probe cache
- af105b3 feat: add job compare UI, preview fallbacks, and locale bootstrap
- 4d8e7f8 fix: refine expanded preview source switching
- 5dbfb12 fix: align compare frames after seek
- 0b8ac17 fix: open full parameter panel from preset wizard
- 9535981 feat: adjust the order of right click menu buttons
- c783254 style: code formatting
- d50fd14 fix: make repo checks green (zero warnings)
- e67f797 feat(queue): add 3D carousel view mode for queue display
- 7f32ceb fix: correct resume seek using probed segment durations
- eb43af0 fix: prevent batch detail context menu clipping
- d4401a1 fix: prevent progress reset between serial jobs
- 19f32ff fix(queue): improve 3D carousel with larger cards and infinite loop
- 0a813a2 fix(preview): reduce scrub jank with fast seek and scheduler
- f95086d fix(queue): correct 3D carousel layout with proper z-index layering
- 65b6623 fix: allow deleting all-skipped Smart Scan batches
- 1ef0778 fix: render global alerts as overlay
- d8482da fix: prevent 3D carousel overlap and use full queue space
- 5857afd feat(context-menu): add context menu for skipped jobs with copy and open folder options
- 729f2b3 refactor: rename Smart Scan to Batch Compress
- 3146ac1 fix(ui): align global alert dismiss button and localize title
- 0b714bc fix: delete legacy Batch Compress batches
- 5871f34 feat(tauri): persist window size and position
- 36ca1b2 fix: refresh taskbar progress labels on locale switch
- 2c5b4c3 docs: add compare wipe screenshot to docs
- 1ee11a3 fix: refresh queue thumbnails after preview regeneration
- 4f90ff5 docs: improve screenshots (hide batch compress, add compare wipe gif)
- 71cffa0 fix: harden preview selection and empty-queue badge
- ecbf873 refactor(queue): responsive 3D carousel and preview improvements
