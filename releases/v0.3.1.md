# FFUI v0.3.1

Full Changelog:

- https://github.com/muyuanjin/ffui/compare/v0.3.0...v0.3.1

## English

### Key Updates

- Preset quality insights: richer preset stats and VQ-driven insights; preset cards can show predicted/measured VMAF and throughput/size metrics.
- VMAF measurement workflow: pick (or download) a reference video, run selected presets, and aggregate VMAF into preset stats (count/mean/min/max).
- Preset management UX: selection actions, improved sorting (direction / created time / VMAF), and safer import validation.
- Stability: hardened settings recovery and engine persistence, fixed metrics sampler lost wakeups, and stabilized VMAF parsing.

### Detailed Explanation

- Presets and VQ
  - Added a unified quality snapshot and a predictor fallback; improved predictor behavior (e.g. monotonic CQ) and reduced noisy points.
  - Extended preset stats and onboarding with VQ insights and clearer VMAF hints/tooltips.
- VMAF measurement
  - Added a built-in “Measure VMAF” dialog that encodes a reference video and runs FFmpeg’s `libvmaf` to compute a mean score per preset.
  - Added presets UX around measured results (dialogs, footer stats), and improved parsing stability on the backend.
- UI polish
  - Added boot overlay and fullscreen toggle; improved preset panel actions and import validation affordances.
- Reliability and tooling
  - Hardened settings recovery; reinforced metrics sampling wakeups; coalesced `check:all` runs and tightened its gate docs.

### Notes

- VMAF measurement uses FFmpeg’s `libvmaf` filter; audio is ignored and the default run trims to the first 30 seconds for speed.
- Settings and job records are versioned; migrations run automatically on load.

## 中文

### 重点更新

- 预设质量洞察：预设统计信息更丰富，引入 VQ 相关洞察；预设卡片可展示预测/实测 VMAF、吞吐/体积等指标。
- VMAF 测量流程：选择（或下载）参考视频，批量跑选中的预设并聚合 VMAF 到预设统计（次数/均值/最小/最大）。
- 预设管理体验：新增选择操作位、排序增强（方向/创建时间/VMAF）、以及更安全的导入校验入口。
- 稳定性：设置恢复与引擎持久化加固、修复 metrics sampler 丢唤醒、并稳定 VMAF 解析。

### 细节说明

- 预设与 VQ
  - 新增统一的质量快照与预测回退；改进预测器行为（如 CQ 单调性）并减少噪点干扰。
  - 扩展预设统计与引导，补齐 VQ 洞察与更清晰的 VMAF 提示/tooltip。
- VMAF 测量
  - 内置“测量 VMAF”对话框：对参考视频用选中预设进行转码，并用 FFmpeg 的 `libvmaf` 计算每个预设的均值分数。
  - 完善实测结果的 UI 展示（对话框、卡片底部统计），并提升后端解析稳定性。
- UI 打磨
  - 新增启动遮罩与全屏切换；改善预设面板操作位与导入校验的可用性。
- 可靠性与工具
  - 设置恢复加固；metrics 采样唤醒机制修正；合并 `check:all` 运行并收紧门禁文档。

### 说明

- VMAF 测量依赖 FFmpeg 的 `libvmaf` filter；测量时忽略音频，默认只取前 30 秒以加速。
- 设置文件与任务记录包含版本迁移；加载时会自动完成升级。
